<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Memories - Etherith</title>
    <link rel="stylesheet" href="/src/css/style.css">
    <link rel="manifest" href="/manifest.webmanifest">
    <link rel="icon" href="/favicon.ico">
    <meta name="theme-color" content="#5865F2">
</head>
<body class="memories-page">
    <div class="container">
        <header class="app-header">
            <div class="logo">
                <h1>üß† Etherith</h1>
            </div>
            <div class="user-profile" id="userProfile">
                <img id="userAvatar" class="avatar" src="" alt="User Avatar">
                <span id="userName">Loading...</span>
            </div>
        </header>

        <nav class="main-nav">
            <a href="/dashboard.html" class="nav-link">
                <span class="icon">üè†</span>
                Dashboard
            </a>
            <a href="/upload.html" class="nav-link">
                <span class="icon">üì§</span>
                Upload Memory
            </a>
            <a href="/memories.html" class="nav-link active">
                <span class="icon">üóÇÔ∏è</span>
                My Memories
            </a>
            <a href="/shared.html" class="nav-link">
                <span class="icon">üîó</span>
                Shared
            </a>
            <a href="/peers.html" class="nav-link">
                <span class="icon">üåê</span>
                Peers
            </a>
        </nav>

        <main class="memories-content">
            <div class="page-header">
                <div class="header-content">
                    <h2>üóÇÔ∏è My Memories</h2>
                    <p>Browse and manage your personal memory archive</p>
                </div>
                <a href="/upload.html" class="btn-primary">
                    <span class="btn-icon">üì§</span>
                    Upload New
                </a>
            </div>

            <div class="memories-controls">
                <div class="search-bar">
                    <input type="text" id="searchInput" placeholder="Search memories by title, description, or tags...">
                    <button id="searchBtn" class="search-btn">üîç</button>
                </div>

                <div class="filter-controls">
                    <select id="sortBy" class="filter-select">
                        <option value="date-desc">Newest First</option>
                        <option value="date-asc">Oldest First</option>
                        <option value="title-asc">Title A-Z</option>
                        <option value="title-desc">Title Z-A</option>
                    </select>

                    <select id="filterBy" class="filter-select">
                        <option value="all">All Memories</option>
                        <option value="private">Private Only</option>
                        <option value="shareable">Shareable Only</option>
                        <option value="has-files">With Files</option>
                    </select>

                    <button id="viewToggle" class="view-toggle" title="Toggle view">
                        <span id="viewIcon">üî≤</span>
                    </button>
                </div>
            </div>

            <div class="memories-stats">
                <span id="memoryCount">0 memories</span>
                <span id="totalSize">0 KB total</span>
            </div>

            <div id="memoriesGrid" class="memories-grid">
                <div class="empty-state" id="emptyState">
                    <div class="empty-icon">üì≠</div>
                    <h3>No memories yet</h3>
                    <p>Start building your memory archive by uploading your first memory</p>
                    <a href="/upload.html" class="btn-primary">Upload First Memory</a>
                </div>
            </div>

            <div id="memoryModal" class="modal hidden">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 id="modalTitle">Memory Details</h3>
                        <button id="closeModal" class="close-btn">‚úï</button>
                    </div>
                    <div class="modal-body">
                        <div class="memory-details">
                            <div class="detail-section">
                                <h4>üìù Information</h4>
                                <div class="detail-grid">
                                    <div class="detail-item">
                                        <strong>Title:</strong>
                                        <span id="modalMemoryTitle"></span>
                                    </div>
                                    <div class="detail-item">
                                        <strong>Date:</strong>
                                        <span id="modalMemoryDate"></span>
                                    </div>
                                    <div class="detail-item">
                                        <strong>Location:</strong>
                                        <span id="modalMemoryLocation">Not specified</span>
                                    </div>
                                    <div class="detail-item">
                                        <strong>Privacy:</strong>
                                        <span id="modalMemoryPrivacy"></span>
                                    </div>
                                </div>
                                <div class="detail-item full-width">
                                    <strong>Description:</strong>
                                    <p id="modalMemoryDescription">No description</p>
                                </div>
                                <div class="detail-item full-width" id="modalTagsContainer">
                                    <strong>Tags:</strong>
                                    <div id="modalMemoryTags" class="tag-list"></div>
                                </div>
                            </div>

                            <div class="detail-section" id="modalFilesSection">
                                <h4>üìÅ Files</h4>
                                <div id="modalFileList" class="modal-file-list"></div>
                            </div>

                            <div class="detail-section" id="modalCidSection">
                                <h4>üîó Content ID</h4>
                                <div class="cid-container">
                                    <code id="modalCid" class="cid-display"></code>
                                    <button id="modalCopyCid" class="copy-btn" title="Copy CID">üìã</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button id="deleteMemoryBtn" class="btn-danger">Delete</button>
                        <button id="shareMemoryBtn" class="btn-secondary">Share</button>
                        <button id="downloadMemoryBtn" class="btn-primary">Download</button>
                    </div>
                </div>
            </div>

            <div id="shareModal" class="modal hidden">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>Share Memory</h3>
                        <button id="closeShareModal" class="close-btn">‚úï</button>
                    </div>
                    <div class="modal-body">
                        <div class="share-content">
                            <p>Share this memory using its Content ID (CID):</p>
                            <div class="share-cid">
                                <code id="shareCid" class="cid-display"></code>
                                <button id="copyShareCid" class="copy-btn" title="Copy CID">üìã</button>
                            </div>
                            <div class="share-instructions">
                                <h4>How to share:</h4>
                                <ol>
                                    <li>Copy the CID above</li>
                                    <li>Send it to someone with Etherith</li>
                                    <li>They can import it in the "Shared" section</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <footer class="app-footer">
            <p>Your memories are stored locally and optionally shared via IPFS</p>
        </footer>
    </div>

    <script type="module" src="/src/js/main.js"></script>
    <script type="module" src="/src/js/memories.js"></script>
</body>
</html>